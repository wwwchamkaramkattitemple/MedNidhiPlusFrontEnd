<div class="dashboard-container">
  <div *ngIf="isLoading" class="loading-spinner">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!isLoading" class="dashboard-content">
    <h1 class="mat-headline-4">Dashboard</h1>

   

    <!-- Stats Cards -->
<div class="stats-cards">
  <mat-card class="stat-card bg-light-primary">
    <mat-card-content class="stat-content">
      <mat-icon class="stat-icon text-primary">people</mat-icon>
      <div class="stat-label text-primary">Total Patients</div>
      <div class="stat-value text-primary">{{ stats.totalPatients }}</div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/patients">View All</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="stat-card bg-light-warning">
    <mat-card-content class="stat-content">
      <mat-icon class="stat-icon text-warning">event</mat-icon>
      <div class="stat-label text-warning">Today's Appointments</div>
      <div class="stat-value text-warning">{{ stats.appointmentsToday }}</div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/appointments">View All</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="stat-card bg-light-danger">
    <mat-card-content class="stat-content">
      <mat-icon class="stat-icon text-danger">receipt_long</mat-icon>
      <div class="stat-label text-danger">Pending Invoices</div>
      <div class="stat-value text-danger">{{ stats.pendingInvoices }}</div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/billing">View All</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="stat-card bg-light-success">
    <mat-card-content class="stat-content">
      <mat-icon class="stat-icon text-success">currency_rupee</mat-icon>
      <div class="stat-label text-success">Revenue This Month</div>
      <div class="stat-value text-success">
        â‚¹ {{ stats.revenueThisMonth }}
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/reports">View Reports</button>
    </mat-card-actions>
  </mat-card>
</div>


    <!-- Recent Activity -->
    <div class="recent-activity">
      <!-- Recent Appointments -->
      <mat-card class="activity-card">
        <mat-card-header>
          <mat-card-title>Recent Appointments</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            <mat-list-item *ngFor="let appointment of recentAppointments">
              <div matListItemTitle>{{ appointment.patientName }}</div>
              <div matListItemLine>
                {{ appointment.date | date:'MMM d, y' }} at {{ appointment.time }} - {{ appointment.type }}
              </div>
              <div matListItemMeta>
                <!-- <mat-chip [color]="getStatusColor(appointment.status)" selected>{{ appointment.status }}</mat-chip> -->
                <mat-chip #chip>
                <span class="mat-chip-content" [style.color]="getStatusColor(appointment.status)">
                  {{ appointment.status }}
                </span>
              </mat-chip>
              </div>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" routerLink="/appointments">View All Appointments</button>
        </mat-card-actions>
      </mat-card>

      <!-- Recent Invoices -->
      <mat-card class="activity-card">
        <mat-card-header>
          <mat-card-title>Recent Invoices</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            <mat-list-item *ngFor="let invoice of recentInvoices">
              <div matListItemTitle>{{ invoice.patientName }}</div>
              <div matListItemLine>
                {{ invoice.date | date:'MMM d, y' }} - &#8377;{{ invoice.amount }}
              </div>
              <div matListItemMeta>
                <!-- <mat-chip  [color]="getStatusColor(invoice.status)" selected>{{ invoice.status }}</mat-chip> -->
              <mat-chip #chip>
                <span class="mat-chip-content" [style.color]="getStatusColor(invoice.status)">
                  {{ invoice.status }}
                </span>
              </mat-chip>

                

              </div>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" routerLink="/billing">View All Invoices</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>